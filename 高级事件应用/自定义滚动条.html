<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Document</title>
<style type="text/css">
#Parent{width: 400px;height: 20px;background-color: red;position: relative;margin: 20px auto;}
#div1{width: 20px;height: 20px;background-color: #ccc;position: absolute;cursor: pointer;}
#div2{width: 300px;height: 300px;background-color: yellow;opacity: 0;filter:alpha(opacity:0);}
</style>
<script type="text/javascript">
window.onload=function()
{
	var oParent=document.getElementById("Parent");
	var oDiv=document.getElementById("div1");
	var oDiv2=document.getElementById("div2");

	oDiv.onmousedown=function(ev)
	{
	   var oEvent=ev||event;
	   var disX=oEvent.clientX-oDiv.offsetLeft;

	   document.onmousemove=function(ev)
	   {
	   	  var oEvent=ev||event;
	   	  var l=oEvent.clientX-disX;
	   	  if(l<0)
	   	  {
	   	  	l=0;
	   	  }
	   	  else if(l>oParent.offsetWidth-oDiv.offsetWidth)
	   	  {
	   	  	l=oParent.offsetWidth-oDiv.offsetWidth;
	   	  }
	   	  oDiv.style.left=l+"px";
	   	  var scale=l/(oParent.offsetWidth-oDiv.offsetWidth);
	   	  // oDiv2.style.filter="alpha(opacity:"+100*scale+")";
	   	  oDiv2.style.opacity=scale;
	   };
	   document.onmouseup=function()
	   {
	   	  document.onmousemove=null;
	   	  document.onmouseup=null;
	   }
	};
}
</script>
</head>
<body>
<div id="Parent">
	<div id="div1"></div>
</div>
<div id="div2">
</div>
</body>
</html>